{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Grid,Card,CardContent,Typography,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,Button,Modal,Box,TextField,MenuItem,Select,InputLabel,FormControl,IconButton,Divider}from\"@mui/material\";import{Delete,Edit,Visibility,Add,Close,Clear}from\"@mui/icons-material\";import{Breadcrumbs,Link}from\"@mui/material\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_URL||\"http://localhost:9092\";const modalStyle={position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",width:\"80%\",bgcolor:\"background.paper\",boxShadow:24,p:4,borderRadius:\"10px\",overflowY:\"auto\",maxHeight:\"90vh\"};const AdminPreguntas=()=>{const[preguntas,setPreguntas]=useState([]);const[procesos,setProcesos]=useState([]);const[loading,setLoading]=useState(true);const[openModal,setOpenModal]=useState(false);const[modalMode,setModalMode]=useState(\"\");// \"view\" | \"add\" | \"edit\"\nconst[selectedPregunta,setSelectedPregunta]=useState({});const[tipoPregunta,setTipoPregunta]=useState(\"proceso\");// \"proceso\" o \"general\"\nconst[filtroProceso,setFiltroProceso]=useState(\"\");// Estado para el proceso seleccionado\nconst navigate=useNavigate();// Inicializa navigate\nconst[formData,setFormData]=useState({descripcion:\"\",proceso:\"\",general:0,ayuda:\"\",respuestas:[{descripcion:\"\",ponderacion:0,tareas:[\"\"]}]});useEffect(()=>{fetchData();},[]);const fetchData=async()=>{setLoading(true);try{const resPreguntas=await fetch(`${API_BASE_URL}/api/admin/preguntas`);const resProcesos=await fetch(`${API_BASE_URL}/api/admin/procesos`);const preguntasData=await resPreguntas.json();const procesosData=await resProcesos.json();setPreguntas(preguntasData);setProcesos(procesosData);}catch(error){console.error(\"Error fetching data:\",error);}finally{setLoading(false);}};const handleOpenModal=function(mode){let pregunta=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};setModalMode(mode);if(mode===\"add\"){setTipoPregunta(\"proceso\");setFormData({descripcion:\"\",proceso:\"\",general:0,ayuda:\"\",respuestas:[{descripcion:\"\",ponderacion:0,tareas:[\"\"]}]});}else{var _pregunta$proceso,_pregunta$respuestas;setSelectedPregunta(pregunta);setTipoPregunta(pregunta.proceso?\"proceso\":\"general\");setFormData({descripcion:pregunta.descripcion||\"\",proceso:((_pregunta$proceso=pregunta.proceso)===null||_pregunta$proceso===void 0?void 0:_pregunta$proceso._id)||\"\",general:pregunta.general||0,ayuda:pregunta.ayuda||\"\",respuestas:((_pregunta$respuestas=pregunta.respuestas)===null||_pregunta$respuestas===void 0?void 0:_pregunta$respuestas.map(resp=>({descripcion:resp.descripcion||\"\",ponderacion:resp.ponderacion||0,tareas:resp.tareas||[\"\"]})))||[{descripcion:\"\",ponderacion:0,tareas:[\"\"]}]});}setOpenModal(true);};const handleAddRespuesta=()=>{if(modalMode===\"view\")return;// Evitar cambios en modo 'view'\nsetFormData({...formData,respuestas:[...formData.respuestas,{descripcion:\"\",ponderacion:\"\",tareas:[\"\"]}// Nueva respuesta vacía\n]});};const handleDeleteRespuesta=index=>{if(modalMode===\"view\")return;// Evitar cambios en modo 'view'\nconst updatedRespuestas=formData.respuestas.filter((_,i)=>i!==index);setFormData({...formData,respuestas:updatedRespuestas});};const handleCloseModal=()=>setOpenModal(false);const handleAddTarea=respIndex=>{const updated=[...formData.respuestas];updated[respIndex].tareas.push(\"\");setFormData({...formData,respuestas:updated});};const handleDeleteTarea=(respIndex,tareaIndex)=>{const updated=[...formData.respuestas];updated[respIndex].tareas.splice(tareaIndex,1);setFormData({...formData,respuestas:updated});};// Aplica el filtro directamente antes de reducir\nconst handleSave=async()=>{try{const method=modalMode===\"add\"?\"POST\":\"PUT\";const url=modalMode===\"add\"?`${API_BASE_URL}/api/admin/preguntas/create`// Nueva ruta para añadir\n:`${API_BASE_URL}/api/admin/preguntas/update/${selectedPregunta._id}`;// Nueva ruta para actualizar\nconst payload={descripcion:formData.descripcion,ayuda:formData.ayuda,respuestas:formData.respuestas,...(tipoPregunta===\"proceso\"?{proceso:formData.proceso}:{general:formData.general})};const response=await fetch(url,{method,headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)});if(!response.ok){throw new Error(\"Error al guardar la pregunta\");}fetchData();handleCloseModal();}catch(error){console.error(\"Error al guardar la pregunta:\",error);}};const handleDeletePregunta=async id=>{if(window.confirm(\"¿Estás seguro de eliminar esta pregunta?\")){try{const response=await fetch(`${API_BASE_URL}/api/admin/preguntas/delete/${id}`,{method:\"DELETE\"});if(!response.ok){throw new Error(\"Error al eliminar la pregunta\");}fetchData();// Recargar las preguntas después de eliminar\n}catch(error){console.error(\"Error al eliminar la pregunta:\",error);}}};// Filtrado de preguntas según el proceso seleccionado\nconst preguntasFiltradas=filtroProceso?preguntas.filter(pregunta=>{var _pregunta$proceso2;return((_pregunta$proceso2=pregunta.proceso)===null||_pregunta$proceso2===void 0?void 0:_pregunta$proceso2.nombre)===filtroProceso;}):preguntas;// Generar las preguntas categorizadas por proceso usando las preguntas filtradas\nconst preguntasPorProceso=preguntasFiltradas.reduce((acc,pregunta)=>{var _pregunta$proceso3;const key=((_pregunta$proceso3=pregunta.proceso)===null||_pregunta$proceso3===void 0?void 0:_pregunta$proceso3.nombre)||\"General\";acc[key]=acc[key]||[];acc[key].push(pregunta);return acc;},{});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"6rem 2rem 2rem\",minHeight:\"100vh\"},children:[/*#__PURE__*/_jsxs(Breadcrumbs,{\"aria-label\":\"breadcrumb\",sx:{mb:2},children:[/*#__PURE__*/_jsx(Link,{underline:\"hover\",color:\"inherit\",onClick:()=>navigate(\"/admin-dashboard\"),style:{cursor:\"pointer\"},children:\"Panel de Administraci\\xF3n\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.primary\",children:\"Gesti\\xF3n de Preguntas\"})]}),/*#__PURE__*/_jsxs(Grid,{container:true,alignItems:\"center\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"Gesti\\xF3n de Preguntas\"}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,style:{marginTop:\"1rem\",marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Filtrar por Proceso\"}),/*#__PURE__*/_jsxs(Select,{value:filtroProceso,onChange:e=>setFiltroProceso(e.target.value),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"Todos\"}),procesos.map(proceso=>/*#__PURE__*/_jsx(MenuItem,{value:proceso.nombre,children:proceso.nombre},proceso._id))]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:()=>handleOpenModal(\"add\"),children:\"A\\xF1adir Nueva Pregunta\"})]}),Object.entries(preguntasPorProceso).map(_ref=>{let[proceso,preguntas]=_ref;return/*#__PURE__*/_jsx(Card,{style:{marginTop:\"2rem\"},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{color:\"#1e4b81\",fontWeight:\"bold\"},children:proceso}),/*#__PURE__*/_jsx(Divider,{style:{margin:\"1rem 0\"}}),preguntas.map(pregunta=>/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",style:{marginBottom:\"1rem\",padding:\"1rem\",background:\"#f9f9f9\"},children:[/*#__PURE__*/_jsx(Typography,{children:pregunta.descripcion}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",gap:1,children:[/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleOpenModal(\"view\",pregunta),children:/*#__PURE__*/_jsx(Visibility,{sx:{color:\"blue\"}})}),/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleOpenModal(\"edit\",pregunta),children:/*#__PURE__*/_jsx(Edit,{sx:{color:\"orange\"}})}),/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleDeletePregunta(pregunta._id),children:/*#__PURE__*/_jsx(Delete,{sx:{color:\"red\"}})})})]})]},pregunta._id))]})},proceso);}),/*#__PURE__*/_jsx(Modal,{open:openModal,onClose:handleCloseModal,children:/*#__PURE__*/_jsxs(Box,{sx:modalStyle,children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:modalMode===\"add\"?\"Añadir Nueva Pregunta\":modalMode===\"edit\"?\"Editar Pregunta\":\"Detalles de la Pregunta\"}),/*#__PURE__*/_jsx(IconButton,{onClick:handleCloseModal,children:/*#__PURE__*/_jsx(Close,{})})]}),modalMode===\"add\"&&/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Tipo de Pregunta\"}),/*#__PURE__*/_jsxs(Select,{value:tipoPregunta,onChange:e=>setTipoPregunta(e.target.value),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"proceso\",children:\"Pregunta de Proceso\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"general\",children:\"Pregunta General\"})]})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,margin:\"normal\",label:\"Descripci\\xF3n\",value:formData.descripcion,onChange:e=>setFormData({...formData,descripcion:e.target.value}),disabled:modalMode===\"view\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,margin:\"normal\",label:\"Ayuda\",value:formData.ayuda,onChange:e=>setFormData({...formData,ayuda:e.target.value}),disabled:modalMode===\"view\"}),tipoPregunta===\"proceso\"?/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",disabled:modalMode===\"view\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Proceso\"}),/*#__PURE__*/_jsx(Select,{value:formData.proceso,onChange:e=>setFormData({...formData,proceso:e.target.value}),children:procesos.map(proceso=>/*#__PURE__*/_jsx(MenuItem,{value:proceso._id,children:proceso.nombre},proceso._id))})]}):/*#__PURE__*/_jsx(TextField,{fullWidth:true,margin:\"normal\",label:\"General\",type:\"number\",value:formData.general,onChange:e=>setFormData({...formData,general:e.target.value}),disabled:modalMode===\"view\"}),formData.respuestas.map((resp,respIndex)=>/*#__PURE__*/_jsxs(Box,{style:{marginTop:\"1.5rem\",borderBottom:\"1px solid #ccc\",paddingBottom:\"1rem\"},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[\"Respuesta \",respIndex+1]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,margin:\"normal\",label:\"Descripci\\xF3n de la Respuesta\",value:resp.descripcion,onChange:e=>{const updated=[...formData.respuestas];updated[respIndex].descripcion=e.target.value;setFormData({...formData,respuestas:updated});},disabled:modalMode===\"view\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,margin:\"normal\",label:\"Ponderaci\\xF3n\",type:\"number\",value:resp.ponderacion,onChange:e=>{const updated=[...formData.respuestas];updated[respIndex].ponderacion=e.target.value;setFormData({...formData,respuestas:updated});},disabled:modalMode===\"view\"}),resp.ponderacion<100&&resp.tareas.map((tarea,tareaIndex)=>/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,margin:\"normal\",label:`Tarea ${tareaIndex+1}`,value:tarea,onChange:e=>{const updated=[...formData.respuestas];updated[respIndex].tareas[tareaIndex]=e.target.value;setFormData({...formData,respuestas:updated});},disabled:modalMode===\"view\"}),modalMode!==\"view\"&&/*#__PURE__*/_jsx(IconButton,{color:\"error\",onClick:()=>handleDeleteTarea(respIndex,tareaIndex),children:/*#__PURE__*/_jsx(Clear,{})})]},tareaIndex)),modalMode!==\"view\"&&resp.ponderacion<100&&/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>handleAddTarea(respIndex),style:{marginTop:\"1rem\"},children:\"A\\xF1adir Tarea\"}),modalMode!==\"view\"&&/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"error\",onClick:()=>handleDeleteRespuesta(respIndex),style:{marginTop:\"1rem\"},children:\"Eliminar Respuesta\"})]},respIndex)),modalMode!==\"view\"&&/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:handleAddRespuesta,style:{marginTop:\"1rem\"},children:\"A\\xF1adir Respuesta\"}),modalMode!==\"view\"&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,onClick:handleSave,style:{marginTop:\"2rem\"},children:\"Guardar\"})]})})]});};export default AdminPreguntas;","map":{"version":3,"names":["React","useEffect","useState","Grid","Card","CardContent","Typography","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Button","Modal","Box","TextField","MenuItem","Select","InputLabel","FormControl","IconButton","Divider","Delete","Edit","Visibility","Add","Close","Clear","Breadcrumbs","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_URL","modalStyle","position","top","left","transform","width","bgcolor","boxShadow","p","borderRadius","overflowY","maxHeight","AdminPreguntas","preguntas","setPreguntas","procesos","setProcesos","loading","setLoading","openModal","setOpenModal","modalMode","setModalMode","selectedPregunta","setSelectedPregunta","tipoPregunta","setTipoPregunta","filtroProceso","setFiltroProceso","navigate","formData","setFormData","descripcion","proceso","general","ayuda","respuestas","ponderacion","tareas","fetchData","resPreguntas","fetch","resProcesos","preguntasData","json","procesosData","error","console","handleOpenModal","mode","pregunta","arguments","length","undefined","_pregunta$proceso","_pregunta$respuestas","_id","map","resp","handleAddRespuesta","handleDeleteRespuesta","index","updatedRespuestas","filter","_","i","handleCloseModal","handleAddTarea","respIndex","updated","push","handleDeleteTarea","tareaIndex","splice","handleSave","method","url","payload","response","headers","body","JSON","stringify","ok","Error","handleDeletePregunta","id","window","confirm","preguntasFiltradas","_pregunta$proceso2","nombre","preguntasPorProceso","reduce","acc","_pregunta$proceso3","key","style","padding","minHeight","children","sx","mb","underline","color","onClick","cursor","container","alignItems","justifyContent","variant","fullWidth","marginTop","marginBottom","value","onChange","e","target","startIcon","Object","entries","_ref","fontWeight","margin","display","background","gap","open","onClose","label","disabled","type","borderBottom","paddingBottom","tarea"],"sources":["C:/Users/Yolanda Ayuso/Desktop/frontDespliegueDef/DQPA_v1.2Front/dqpa/src/pages/AdminPreguntas.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Button,\r\n  Modal,\r\n  Box,\r\n  TextField,\r\n  MenuItem,\r\n  Select,\r\n  InputLabel,\r\n  FormControl,\r\n  IconButton,\r\n  Divider,\r\n} from \"@mui/material\";\r\nimport { Delete, Edit, Visibility, Add, Close, Clear } from \"@mui/icons-material\";\r\nimport { Breadcrumbs, Link } from \"@mui/material\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || \"http://localhost:9092\";\r\n\r\n\r\nconst modalStyle = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: \"80%\",\r\n  bgcolor: \"background.paper\",\r\n  boxShadow: 24,\r\n  p: 4,\r\n  borderRadius: \"10px\",\r\n  overflowY: \"auto\",\r\n  maxHeight: \"90vh\",\r\n};\r\n\r\nconst AdminPreguntas = () => {\r\n  const [preguntas, setPreguntas] = useState([]);\r\n  const [procesos, setProcesos] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [modalMode, setModalMode] = useState(\"\"); // \"view\" | \"add\" | \"edit\"\r\n  const [selectedPregunta, setSelectedPregunta] = useState({});\r\n  const [tipoPregunta, setTipoPregunta] = useState(\"proceso\"); // \"proceso\" o \"general\"\r\n  const [filtroProceso, setFiltroProceso] = useState(\"\"); // Estado para el proceso seleccionado\r\n  const navigate = useNavigate(); // Inicializa navigate\r\n\r\n  const [formData, setFormData] = useState({\r\n    descripcion: \"\",\r\n    proceso: \"\",\r\n    general: 0,\r\n    ayuda: \"\",\r\n    respuestas: [{ descripcion: \"\", ponderacion: 0, tareas: [\"\"] }],\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const resPreguntas = await fetch(`${API_BASE_URL}/api/admin/preguntas`);\r\n      const resProcesos = await fetch(`${API_BASE_URL}/api/admin/procesos`);      \r\n      const preguntasData = await resPreguntas.json();\r\n      const procesosData = await resProcesos.json();\r\n\r\n      setPreguntas(preguntasData);\r\n      setProcesos(procesosData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleOpenModal = (mode, pregunta = {}) => {\r\n    setModalMode(mode);\r\n    if (mode === \"add\") {\r\n      setTipoPregunta(\"proceso\");\r\n      setFormData({\r\n        descripcion: \"\",\r\n        proceso: \"\",\r\n        general: 0,\r\n        ayuda: \"\",\r\n        respuestas: [{ descripcion: \"\", ponderacion: 0, tareas: [\"\"] }],\r\n      });\r\n    } else {\r\n      setSelectedPregunta(pregunta);\r\n      setTipoPregunta(pregunta.proceso ? \"proceso\" : \"general\");\r\n      setFormData({\r\n        descripcion: pregunta.descripcion || \"\",\r\n        proceso: pregunta.proceso?._id || \"\",\r\n        general: pregunta.general || 0,\r\n        ayuda: pregunta.ayuda || \"\",\r\n        respuestas:\r\n          pregunta.respuestas?.map((resp) => ({\r\n            descripcion: resp.descripcion || \"\",\r\n            ponderacion: resp.ponderacion || 0,\r\n            tareas: resp.tareas || [\"\"],\r\n          })) || [{ descripcion: \"\", ponderacion: 0, tareas: [\"\"] }],\r\n      });\r\n    }\r\n    setOpenModal(true);\r\n  };\r\n  const handleAddRespuesta = () => {\r\n    if (modalMode === \"view\") return; // Evitar cambios en modo 'view'\r\n    setFormData({\r\n      ...formData,\r\n      respuestas: [\r\n        ...formData.respuestas,\r\n        { descripcion: \"\", ponderacion: \"\", tareas: [\"\"] }, // Nueva respuesta vacía\r\n      ],\r\n    });\r\n  };\r\n  const handleDeleteRespuesta = (index) => {\r\n    if (modalMode === \"view\") return; // Evitar cambios en modo 'view'\r\n    const updatedRespuestas = formData.respuestas.filter((_, i) => i !== index);\r\n    setFormData({ ...formData, respuestas: updatedRespuestas });\r\n  };\r\n  \r\n  const handleCloseModal = () => setOpenModal(false);\r\n\r\n  const handleAddTarea = (respIndex) => {\r\n    const updated = [...formData.respuestas];\r\n    updated[respIndex].tareas.push(\"\");\r\n    setFormData({ ...formData, respuestas: updated });\r\n  };\r\n\r\n  const handleDeleteTarea = (respIndex, tareaIndex) => {\r\n    const updated = [...formData.respuestas];\r\n    updated[respIndex].tareas.splice(tareaIndex, 1);\r\n    setFormData({ ...formData, respuestas: updated });\r\n  };\r\n// Aplica el filtro directamente antes de reducir\r\n\r\n\r\n\r\n  const handleSave = async () => {\r\n    \r\n    try {\r\n      const method = modalMode === \"add\" ? \"POST\" : \"PUT\";\r\n      const url =\r\n        modalMode === \"add\"\r\n          ? `${API_BASE_URL}/api/admin/preguntas/create`// Nueva ruta para añadir\r\n          : `${API_BASE_URL}/api/admin/preguntas/update/${selectedPregunta._id}`; // Nueva ruta para actualizar\r\n  \r\n      const payload = {\r\n        descripcion: formData.descripcion,\r\n        ayuda: formData.ayuda,\r\n        respuestas: formData.respuestas,\r\n        ...(tipoPregunta === \"proceso\"\r\n          ? { proceso: formData.proceso }\r\n          : { general: formData.general }),\r\n      };\r\n  \r\n      const response = await fetch(url, {\r\n        method,\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        throw new Error(\"Error al guardar la pregunta\");\r\n      }\r\n  \r\n      fetchData();\r\n      handleCloseModal();\r\n    } catch (error) {\r\n      console.error(\"Error al guardar la pregunta:\", error);\r\n    }\r\n  };\r\n  const handleDeletePregunta = async (id) => {\r\n    if (window.confirm(\"¿Estás seguro de eliminar esta pregunta?\")) {\r\n      try {\r\n        const response = await fetch(\r\n          `${API_BASE_URL}/api/admin/preguntas/delete/${id}`,\r\n          { method: \"DELETE\" }\r\n        );\r\n  \r\n        if (!response.ok) {\r\n          throw new Error(\"Error al eliminar la pregunta\");\r\n        }\r\n  \r\n        fetchData(); // Recargar las preguntas después de eliminar\r\n      } catch (error) {\r\n        console.error(\"Error al eliminar la pregunta:\", error);\r\n      }\r\n    }\r\n  };\r\n  \r\n\r\n// Filtrado de preguntas según el proceso seleccionado\r\nconst preguntasFiltradas = filtroProceso\r\n  ? preguntas.filter((pregunta) => pregunta.proceso?.nombre === filtroProceso)\r\n  : preguntas;\r\n\r\n// Generar las preguntas categorizadas por proceso usando las preguntas filtradas\r\nconst preguntasPorProceso = preguntasFiltradas.reduce((acc, pregunta) => {\r\n  const key = pregunta.proceso?.nombre || \"General\";\r\n  acc[key] = acc[key] || [];\r\n  acc[key].push(pregunta);\r\n  return acc;\r\n}, {});\r\n\r\n\r\n  return (\r\n    <div style={{ padding: \"6rem 2rem 2rem\", minHeight: \"100vh\" }}>\r\n      {/* Breadcrumb */}\r\n  <Breadcrumbs aria-label=\"breadcrumb\" sx={{ mb: 2 }}>\r\n    <Link\r\n      underline=\"hover\"\r\n      color=\"inherit\"\r\n      onClick={() => navigate(\"/admin-dashboard\")}\r\n      style={{ cursor: \"pointer\" }}\r\n    >\r\n      Panel de Administración\r\n    </Link>\r\n    <Typography color=\"text.primary\">Gestión de Preguntas</Typography>\r\n  </Breadcrumbs>\r\n      <Grid container alignItems=\"center\" justifyContent=\"space-between\">\r\n        <Typography variant=\"h5\">Gestión de Preguntas</Typography>\r\n        <FormControl fullWidth style={{ marginTop: \"1rem\", marginBottom: \"1rem\" }}>\r\n  <InputLabel>Filtrar por Proceso</InputLabel>\r\n  <Select\r\n    value={filtroProceso}\r\n    onChange={(e) => setFiltroProceso(e.target.value)}\r\n  >\r\n    <MenuItem value=\"\">Todos</MenuItem>\r\n    {procesos.map((proceso) => (\r\n      <MenuItem key={proceso._id} value={proceso.nombre}>\r\n        {proceso.nombre}\r\n      </MenuItem>\r\n    ))}\r\n  </Select>\r\n</FormControl>\r\n\r\n        <Button variant=\"contained\" startIcon={<Add />} onClick={() => handleOpenModal(\"add\")}>\r\n          Añadir Nueva Pregunta\r\n        </Button>\r\n      </Grid>\r\n\r\n      {Object.entries(preguntasPorProceso).map(([proceso, preguntas]) => (\r\n        <Card key={proceso} style={{ marginTop: \"2rem\" }}>\r\n          <CardContent>\r\n          <Typography variant=\"h6\" style={{ color: \"#1e4b81\", fontWeight: \"bold\" }}>\r\n  {proceso}\r\n</Typography>\r\n          <Divider style={{ margin: \"1rem 0\" }} />\r\n            {preguntas.map((pregunta) => (\r\n              <Box\r\n                key={pregunta._id}\r\n                display=\"flex\"\r\n                justifyContent=\"space-between\"\r\n                alignItems=\"center\"\r\n                style={{ marginBottom: \"1rem\", padding: \"1rem\", background: \"#f9f9f9\" }}\r\n              >\r\n                <Typography>{pregunta.descripcion}</Typography>\r\n                <Box display=\"flex\" gap={1}>\r\n                  <IconButton onClick={() => handleOpenModal(\"view\", pregunta)}>\r\n                    <Visibility sx={{ color: \"blue\" }} />\r\n                  </IconButton>\r\n                  <IconButton onClick={() => handleOpenModal(\"edit\", pregunta)}>\r\n                    <Edit sx={{ color: \"orange\" }} />\r\n                  </IconButton>\r\n                  <IconButton>\r\n                  <IconButton onClick={() => handleDeletePregunta(pregunta._id)}>\r\n  <Delete sx={{ color: \"red\" }} />\r\n</IconButton>\r\n                  </IconButton>\r\n                </Box>\r\n              </Box>\r\n            ))}\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n\r\n<Modal open={openModal} onClose={handleCloseModal}>\r\n  <Box sx={modalStyle}>\r\n    {/* Encabezado del Modal */}\r\n    <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n      <Typography variant=\"h6\">\r\n        {modalMode === \"add\"\r\n          ? \"Añadir Nueva Pregunta\"\r\n          : modalMode === \"edit\"\r\n          ? \"Editar Pregunta\"\r\n          : \"Detalles de la Pregunta\"}\r\n      </Typography>\r\n      <IconButton onClick={handleCloseModal}>\r\n        <Close />\r\n      </IconButton>\r\n    </Box>\r\n\r\n    {/* Tipo de Pregunta */}\r\n    {modalMode === \"add\" && (\r\n      <FormControl fullWidth margin=\"normal\">\r\n        <InputLabel>Tipo de Pregunta</InputLabel>\r\n        <Select\r\n          value={tipoPregunta}\r\n          onChange={(e) => setTipoPregunta(e.target.value)}\r\n        >\r\n          <MenuItem value=\"proceso\">Pregunta de Proceso</MenuItem>\r\n          <MenuItem value=\"general\">Pregunta General</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n    )}\r\n\r\n    {/* Descripción */}\r\n    <TextField\r\n      fullWidth\r\n      margin=\"normal\"\r\n      label=\"Descripción\"\r\n      value={formData.descripcion}\r\n      onChange={(e) =>\r\n        setFormData({ ...formData, descripcion: e.target.value })\r\n      }\r\n      disabled={modalMode === \"view\"}\r\n    />\r\n\r\n    {/* Ayuda */}\r\n    <TextField\r\n      fullWidth\r\n      margin=\"normal\"\r\n      label=\"Ayuda\"\r\n      value={formData.ayuda}\r\n      onChange={(e) => setFormData({ ...formData, ayuda: e.target.value })}\r\n      disabled={modalMode === \"view\"}\r\n    />\r\n\r\n    {/* Proceso o General */}\r\n    {tipoPregunta === \"proceso\" ? (\r\n      <FormControl fullWidth margin=\"normal\" disabled={modalMode === \"view\"}>\r\n        <InputLabel>Proceso</InputLabel>\r\n        <Select\r\n          value={formData.proceso}\r\n          onChange={(e) =>\r\n            setFormData({ ...formData, proceso: e.target.value })\r\n          }\r\n        >\r\n          {procesos.map((proceso) => (\r\n            <MenuItem key={proceso._id} value={proceso._id}>\r\n              {proceso.nombre}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n    ) : (\r\n      <TextField\r\n        fullWidth\r\n        margin=\"normal\"\r\n        label=\"General\"\r\n        type=\"number\"\r\n        value={formData.general}\r\n        onChange={(e) =>\r\n          setFormData({ ...formData, general: e.target.value })\r\n        }\r\n        disabled={modalMode === \"view\"}\r\n      />\r\n    )}\r\n\r\n    {/* Respuestas */}\r\n    {formData.respuestas.map((resp, respIndex) => (\r\n      <Box\r\n        key={respIndex}\r\n        style={{\r\n          marginTop: \"1.5rem\",\r\n          borderBottom: \"1px solid #ccc\",\r\n          paddingBottom: \"1rem\",\r\n        }}\r\n      >\r\n        <Typography variant=\"subtitle1\">Respuesta {respIndex + 1}</Typography>\r\n\r\n        {/* Descripción Respuesta */}\r\n        <TextField\r\n          fullWidth\r\n          margin=\"normal\"\r\n          label=\"Descripción de la Respuesta\"\r\n          value={resp.descripcion}\r\n          onChange={(e) => {\r\n            const updated = [...formData.respuestas];\r\n            updated[respIndex].descripcion = e.target.value;\r\n            setFormData({ ...formData, respuestas: updated });\r\n          }}\r\n          disabled={modalMode === \"view\"}\r\n        />\r\n\r\n        {/* Ponderación */}\r\n        <TextField\r\n          fullWidth\r\n          margin=\"normal\"\r\n          label=\"Ponderación\"\r\n          type=\"number\"\r\n          value={resp.ponderacion}\r\n          onChange={(e) => {\r\n            const updated = [...formData.respuestas];\r\n            updated[respIndex].ponderacion = e.target.value;\r\n            setFormData({ ...formData, respuestas: updated });\r\n          }}\r\n          disabled={modalMode === \"view\"}\r\n        />\r\n\r\n        {/* Tareas (si ponderación < 100) */}\r\n        {resp.ponderacion < 100 &&\r\n          resp.tareas.map((tarea, tareaIndex) => (\r\n            <Box key={tareaIndex} display=\"flex\" alignItems=\"center\" gap={1}>\r\n              <TextField\r\n                fullWidth\r\n                margin=\"normal\"\r\n                label={`Tarea ${tareaIndex + 1}`}\r\n                value={tarea}\r\n                onChange={(e) => {\r\n                  const updated = [...formData.respuestas];\r\n                  updated[respIndex].tareas[tareaIndex] = e.target.value;\r\n                  setFormData({ ...formData, respuestas: updated });\r\n                }}\r\n                disabled={modalMode === \"view\"}\r\n              />\r\n              {modalMode !== \"view\" && (\r\n                <IconButton\r\n                  color=\"error\"\r\n                  onClick={() => handleDeleteTarea(respIndex, tareaIndex)}\r\n                >\r\n                  <Clear />\r\n                </IconButton>\r\n              )}\r\n            </Box>\r\n          ))}\r\n\r\n        {/* Botón para añadir tarea */}\r\n        {modalMode !== \"view\" && resp.ponderacion < 100 && (\r\n          <Button\r\n            variant=\"outlined\"\r\n            onClick={() => handleAddTarea(respIndex)}\r\n            style={{ marginTop: \"1rem\" }}\r\n          >\r\n            Añadir Tarea\r\n          </Button>\r\n        )}\r\n\r\n        {/* Botón para eliminar respuesta */}\r\n        {modalMode !== \"view\" && (\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"error\"\r\n            onClick={() => handleDeleteRespuesta(respIndex)}\r\n            style={{ marginTop: \"1rem\" }}\r\n          >\r\n            Eliminar Respuesta\r\n          </Button>\r\n        )}\r\n      </Box>\r\n    ))}\r\n\r\n    {/* Botón para añadir Respuesta */}\r\n    {modalMode !== \"view\" && (\r\n      <Button\r\n        variant=\"outlined\"\r\n        onClick={handleAddRespuesta}\r\n        style={{ marginTop: \"1rem\" }}\r\n      >\r\n        Añadir Respuesta\r\n      </Button>\r\n    )}\r\n\r\n    {/* Botón Guardar */}\r\n    {modalMode !== \"view\" && (\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        fullWidth\r\n        onClick={handleSave}\r\n        style={{ marginTop: \"2rem\" }}\r\n      >\r\n        Guardar\r\n      </Button>\r\n    )}\r\n  </Box>\r\n</Modal>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPreguntas;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}