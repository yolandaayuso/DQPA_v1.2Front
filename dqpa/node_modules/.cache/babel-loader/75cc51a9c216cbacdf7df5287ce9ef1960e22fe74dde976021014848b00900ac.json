{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useSearchParams,useNavigate}from'react-router-dom';import{Box,Typography,CircularProgress,Alert}from'@mui/material';import axios from'axios';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const ConfirmPage=()=>{const[searchParams]=useSearchParams();const email=searchParams.get('email');const navigate=useNavigate();const[status,setStatus]=useState('loading');// Estados: 'loading', 'success', 'alreadyConfirmed', 'error'\nuseEffect(()=>{const confirmAccount=async()=>{try{const response=await axios.get(`http://localhost:9092/api/auth/confirm?email=${email}`);// Verifica el código de estado en la respuesta\nif(response.status===200){setStatus('success');// Confirmación exitosa\nsetTimeout(()=>navigate('/login'),2000);// Redirige al login tras 3 segundos\n}else if(response.status===400){setStatus('alreadyConfirmed');// Cuenta ya confirmada\n}else{setStatus('error');// Cualquier otro caso inesperado\n}}catch(error){if(error.response){// Maneja respuestas con error del backend\nif(error.response.status===400){setStatus('alreadyConfirmed');// Cuenta ya confirmada\n}else{setStatus('error');// Otros errores del backend\n}}else{// Error de red u otro problema\nsetStatus('error');}}};if(email){confirmAccount();}else{setStatus('error');}},[email,navigate]);return/*#__PURE__*/_jsxs(Box,{sx:{minHeight:'calc(100vh - 160px)',// Ajuste para navbar y footer\ndisplay:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',bgcolor:'#f5f5f5',textAlign:'center',padding:'20px'},children:[status==='loading'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CircularProgress,{}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{mt:2},children:\"Confirmando tu cuenta, por favor espera...\"})]}),status==='success'&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",children:\"\\xA1Tu cuenta ha sido confirmada con \\xE9xito! Ser\\xE1s redirigido al inicio de sesi\\xF3n.\"}),status==='alreadyConfirmed'&&/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:\"Esta cuenta ya estaba confirmada. Por favor, inicia sesi\\xF3n.\"}),status==='error'&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"Hubo un problema al confirmar tu cuenta. Por favor, intenta nuevamente o contacta con soporte.\"})]});};export default ConfirmPage;","map":{"version":3,"names":["React","useEffect","useState","useSearchParams","useNavigate","Box","Typography","CircularProgress","Alert","axios","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ConfirmPage","searchParams","email","get","navigate","status","setStatus","confirmAccount","response","setTimeout","error","sx","minHeight","display","flexDirection","alignItems","justifyContent","bgcolor","textAlign","padding","children","variant","mt","severity"],"sources":["C:/Users/Yolanda Ayuso/Desktop/frontDespliegueDef/DQPA_v1.2Front/dqpa/src/pages/ConfirmPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport { Box, Typography, CircularProgress, Alert } from '@mui/material';\r\nimport axios from 'axios';\r\n\r\nconst ConfirmPage = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const email = searchParams.get('email');\r\n  const navigate = useNavigate();\r\n  const [status, setStatus] = useState('loading'); // Estados: 'loading', 'success', 'alreadyConfirmed', 'error'\r\n\r\n  useEffect(() => {\r\n    const confirmAccount = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:9092/api/auth/confirm?email=${email}`);\r\n        \r\n        // Verifica el código de estado en la respuesta\r\n        if (response.status === 200) {\r\n          setStatus('success'); // Confirmación exitosa\r\n          setTimeout(() => navigate('/login'), 2000); // Redirige al login tras 3 segundos\r\n        } else if (response.status === 400) {\r\n          setStatus('alreadyConfirmed'); // Cuenta ya confirmada\r\n        } else {\r\n          setStatus('error'); // Cualquier otro caso inesperado\r\n        }\r\n      } catch (error) {\r\n        if (error.response) {\r\n          // Maneja respuestas con error del backend\r\n          if (error.response.status === 400) {\r\n            setStatus('alreadyConfirmed'); // Cuenta ya confirmada\r\n          } else {\r\n            setStatus('error'); // Otros errores del backend\r\n          }\r\n        } else {\r\n          // Error de red u otro problema\r\n          setStatus('error');\r\n        }\r\n      }\r\n    };\r\n\r\n    if (email) {\r\n      confirmAccount();\r\n    } else {\r\n      setStatus('error');\r\n    }\r\n  }, [email, navigate]);\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        minHeight: 'calc(100vh - 160px)', // Ajuste para navbar y footer\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        bgcolor: '#f5f5f5',\r\n        textAlign: 'center',\r\n        padding: '20px',\r\n      }}\r\n    >\r\n      {status === 'loading' && (\r\n        <>\r\n          <CircularProgress />\r\n          <Typography variant=\"h6\" sx={{ mt: 2 }}>\r\n            Confirmando tu cuenta, por favor espera...\r\n          </Typography>\r\n        </>\r\n      )}\r\n      {status === 'success' && (\r\n        <Alert severity=\"success\">\r\n          ¡Tu cuenta ha sido confirmada con éxito! Serás redirigido al inicio de sesión.\r\n        </Alert>\r\n      )}\r\n      {status === 'alreadyConfirmed' && (\r\n        <Alert severity=\"info\">\r\n          Esta cuenta ya estaba confirmada. Por favor, inicia sesión.\r\n        </Alert>\r\n      )}\r\n      {status === 'error' && (\r\n        <Alert severity=\"error\">\r\n          Hubo un problema al confirmar tu cuenta. Por favor, intenta nuevamente o contacta con soporte.\r\n        </Alert>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ConfirmPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}